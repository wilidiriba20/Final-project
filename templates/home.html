{% extends "layout.html" %}

{% block title %}
    home
{% endblock %}

{% block body %}

<table class="table">
   
    <tbody>
        {% for img in image %}
        <tr>
            <th class="transparent-col"><form class="save-image-form" method="post" style="display: inline;">
             <input type="hidden" class="save" name="save" value="{{ img }}">
             <button class="btn btn-primary btn-lg" type="submit">Save</button>
         </form>
       </th>
            <td>
             <img class="img-fluid" src="{{ img }}" alt="recipe Image">
          </td>
        </tr>
        
        {% endfor %}
    </tbody>
 </table>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
$(document).ready(function() {
  $('.save-image-form').submit(function(event) {
     event.preventDefault();
     
     // Correct selector to the current form
     const form = $(this); // 'this' refers to the current form
     
     $.ajax({
        type: 'POST',
        url: '/search',
        data: form.serialize(), // Serialize the correct form
        
     });
  });
});
</script>
{%endblock%}